import Bluebird from 'bluebird';
import { extractProxies } from './extractor.js';
import { isPortOpen } from './utils.js';

const proxies = `
116.107.213.122:5020
159.65.237.225:1610
143.107.199.248:8080
192.140.93.6:3128
188.138.125.4:8080
180.211.161.110:8080
185.19.4.22:3128
103.83.80.67:8080
85.210.84.189:8080
202.62.75.17:83
38.51.232.18:8080
118.179.151.57:5020
45.179.71.90:3180
152.26.229.46:9443
103.78.171.10:83
61.19.145.66:8080
38.137.203.10:999
103.54.218.203:8080
94.182.40.51:3128
116.74.80.134:8080
152.26.229.34:9443
195.138.73.54:44017
165.22.98.229:32153
170.83.82.10:3128
103.124.175.225:83
103.41.35.162:58080
186.96.15.70:8080
201.217.246.212:8080
104.128.103.32:51110
46.161.198.245:8085
`;

Bluebird.all(
  extractProxies(proxies).map(async (p) => {
    return { p: await isPortOpen(p) };
  })
).then(console.log);
