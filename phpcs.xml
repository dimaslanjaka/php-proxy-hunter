<?xml version="1.0"?>
<ruleset name="PhpProxyHunter">
  <description>PHPCS rules aligned with php-cs-fixer config (PSR12 + custom rules + 2-space indent)</description>

  <!-- Base coding standard -->
  <rule ref="PSR12">
    <!-- Disable the brace-on-new-line rule for functions, classes, and interfaces -->
    <exclude name="Squiz.Functions.MultiLineFunctionDeclaration.BraceOnSameLine"/>
    <exclude name="Squiz.Classes.ClassDeclaration.OpenBraceNewLine"/>
    <exclude name="PSR2.Classes.ClassDeclaration.OpenBraceNewLine"/>
    <exclude name="Squiz.ControlStructures.ControlSignature.NewlineAfterOpenBrace"/>
    <exclude name="Generic.Classes.OpeningBraceSameLine"/>
  </rule>

  <!-- Disable space after class keyword for anonymous classes -->
  <rule ref="PSR12.Classes.AnonClassDeclaration.SpaceAfterKeyword">
    <severity>0</severity>
  </rule>

  <!-- Exclude rule that enforces no content after opening brace in multi-line function declarations -->
  <exclude name="Squiz.Functions.MultiLineFunctionDeclaration.ContentAfterBrace"/>

  <!-- Exclude rule that enforces no content before closing brace in a scope (like functions or classes) -->
  <exclude name="Squiz.WhiteSpace.ScopeClosingBrace.ContentBefore"/>

  <!-- Exclude rule that disallows multiple statements on the same line -->
  <exclude name="Generic.Formatting.DisallowMultipleStatements.SameLine"/>

  <!-- Disable rule that enforces no content after opening brace in multi-line function declarations -->
  <rule ref="Squiz.Functions.MultiLineFunctionDeclaration.ContentAfterBrace">
    <severity>0</severity>
  </rule>

  <!-- Disable rule that enforces no content before closing brace in a scope -->
  <rule ref="Squiz.WhiteSpace.ScopeClosingBrace.ContentBefore">
    <severity>0</severity>
  </rule>

  <!-- Disable rule that prevents multiple statements being written on the same line -->
  <rule ref="Generic.Formatting.DisallowMultipleStatements.SameLine">
    <severity>0</severity>
  </rule>

  <!-- Disable inline control structure rule -->
  <rule ref="Generic.ControlStructures.InlineControlStructure.NotAllowed">
    <severity>0</severity>
  </rule>

  <!-- Disable header block spacing and control structure indent rules for tests/PhpProxyHunter/CoreDBTest.php -->
  <rule ref="PSR12.Files.FileHeader.SpacingAfterBlock">
    <severity>0</severity>
  </rule>
  <rule ref="PSR12.ControlStructures.ControlStructureSpacing.LineIndent">
    <severity>0</severity>
  </rule>

  <!-- Indentation: 2 spaces -->
  <rule ref="Generic.WhiteSpace.ScopeIndent">
    <properties>
      <property name="indent" value="2"/>
      <property name="tabIndent" value="false"/>
      <property name="exact" value="true"/>
    </properties>
    <exclude name="Generic.WhiteSpace.ScopeIndent.IncorrectExact"/>
  </rule>
  <rule ref="Squiz.Functions.MultiLineFunctionDeclaration.Indent">
    <severity>0</severity>
  </rule>

  <!-- Short array syntax -->
  <rule ref="Generic.Arrays.DisallowLongArraySyntax"/>

  <!-- Unused imports -->
  <rule ref="SlevomatCodingStandard.Namespaces.UnusedUses"/>

  <!-- Exclude the specific sniff for missing namespaces -->
  <rule ref="PSR1.Classes.ClassDeclaration.MissingNamespace">
    <!-- disable it project-wide -->
    <severity>0</severity>
  </rule>
  <exclude name="SlevomatCodingStandard.Namespaces.RequireNamespace"/>
  <exclude name="SlevomatCodingStandard.Namespaces.RequireOneNamespaceLevel"/>
  <exclude name="SlevomatCodingStandard.Namespaces.RequireMultiLevelNamespace"/>
  <exclude name="SlevomatCodingStandard.Namespaces.FullyQualifiedGlobalFunctions"/>
  <exclude name="SlevomatCodingStandard.Namespaces.FullyQualifiedGlobalConstants"/>
  <exclude name="SlevomatCodingStandard.Namespaces.FullyQualifiedGlobalClasses"/>

  <!-- Trailing comma in multiline arrays (disabled) -->
  <rule ref="SlevomatCodingStandard.Arrays.TrailingArrayComma">
    <severity>0</severity>
  </rule>

  <!-- disable side effect -->
  <exclude name="PSR1.Files.SideEffects.FoundWithSymbols"/>
  <rule ref="PSR1.Files.SideEffects">
    <severity>0</severity>
  </rule>

  <!-- disable function call signature indent (indentation error) -->
  <rule ref="PSR2.Methods.FunctionCallSignature.Indent">
    <severity>0</severity>
  </rule>
  <!-- Disable break indent error in switch-case -->
  <rule ref="PSR2.ControlStructures.SwitchDeclaration.BreakIndent">
    <severity>0</severity>
  </rule>
  <!-- Disable multi-line control structure spacing rules -->
  <rule ref="PSR12.ControlStructures.ControlStructureSpacing.FirstExpressionLine">
    <severity>0</severity>
  </rule>
  <rule ref="PSR12.ControlStructures.ControlStructureSpacing.CloseParenthesisLine">
    <severity>0</severity>
  </rule>
  <rule ref="Generic.Files.LineLength">
    <severity>0</severity>
  </rule>

  <!-- Files to scan -->
  <file>./</file>

  <!-- Disable camelCase naming sniffs (variables, functions, methods, properties, classes) -->
  <!-- Common PHPCS sniff names that enforce camelCase or enforce specific naming conventions -->
  <exclude name="Generic.NamingConventions.CamelCapsFunctionName"/>
  <exclude name="Generic.NamingConventions.CamelCapsVariableName"/>
  <exclude name="Squiz.NamingConventions.ValidFunctionName"/>
  <exclude name="Squiz.NamingConventions.ValidVariableName"/>
  <exclude name="Squiz.Classes.ValidClassName"/>
  <exclude name="SlevomatCodingStandard.NamingConventions.UnderscoreSeparated"/>
  <exclude name="SlevomatCodingStandard.NamingConventions.ValidClassName"/>
  <exclude name="SlevomatCodingStandard.NamingConventions.ValidFunctionName"/>
  <exclude name="SlevomatCodingStandard.NamingConventions.ValidVariableName"/>

  <!-- Exclude directories -->
  <exclude-pattern>vendor/*</exclude-pattern>
  <exclude-pattern>node_modules/*</exclude-pattern>
  <exclude-pattern>*/tmp/*</exclude-pattern>
  <exclude-pattern>adminer/*</exclude-pattern>
  <exclude-pattern>phpmyadmin/*</exclude-pattern>
  <exclude-pattern>phpliteadmin/*</exclude-pattern>
  <exclude-pattern>simplehtmldom/*</exclude-pattern>
  <exclude-pattern>.cache/*</exclude-pattern>
  <exclude-pattern>vscode-plugins/*</exclude-pattern>
</ruleset>
