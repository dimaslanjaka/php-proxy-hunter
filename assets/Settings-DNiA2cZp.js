import{f as h,j as e,c as y}from"../index.js";import{r as a,R as w}from"./react-router-ChLYyIsA.js";import"./react-CjZsb-BP.js";const v=()=>{const[o,i]=a.useState(""),[l,f]=a.useState(""),[n,d]=a.useState(""),[c,s]=a.useState(""),[u,m]=a.useState("");w.useEffect(()=>{h().then(t=>{t.authenticated?(i(t.username||""),f(t.email||"")):s("You must be logged in to access settings.")}).catch(t=>{console.error("Error fetching user info:",t),s("Failed to load user information.")})},[]);const x=async t=>{if(t.preventDefault(),s(""),m(""),!o||!l){s("Please fill in all fields.");return}try{const r={update:"1",username:o,email:l};n&&(r.password=n);const p=await fetch(y("/php_backend/user-info.php"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!p.ok)throw new Error("Failed to update user info");const b=await p.json();b&&b.authenticated?(m("Profile updated successfully!"),d("")):s("Failed to update profile.")}catch(r){s(r.message||"Failed to update profile.")}},g=()=>{alert("Redirecting to buy saldo (credit)...")};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900",children:e.jsxs("form",{onSubmit:x,className:"bg-white dark:bg-gray-800 p-8 rounded shadow-md w-full max-w-md",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-6 text-center text-blue-600 dark:text-white flex items-center justify-center",children:[e.jsx("span",{className:"fa-light fa-user-gear mr-3 text-blue-500",style:{fontSize:"1.5rem"}}),"User Settings"]}),c&&e.jsx("div",{className:"mb-4 text-red-500",children:c}),u&&e.jsx("div",{className:"mb-4 text-green-500",children:u}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-1 text-gray-700 dark:text-gray-200",htmlFor:"username",children:"Username"}),e.jsx("input",{id:"username",type:"text",name:"username",value:o,onChange:t=>i(t.target.value),className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring focus:border-blue-300 dark:bg-gray-700 dark:text-white",autoComplete:"username"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-1 text-gray-700 dark:text-gray-200",htmlFor:"email",children:"Email"}),e.jsx("input",{id:"email",type:"email",name:"email",value:l,disabled:!0,className:"w-full px-3 py-2 border rounded bg-gray-200 dark:bg-gray-700 dark:text-white cursor-not-allowed opacity-70",autoComplete:"email"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block mb-1 text-gray-700 dark:text-gray-200",htmlFor:"password",children:"New Password"}),e.jsx("input",{id:"password",type:"password",name:"password",value:n,onChange:t=>d(t.target.value),className:"w-full px-3 py-2 border rounded focus:outline-none focus:ring focus:border-blue-300 dark:bg-gray-700 dark:text-white",autoComplete:"new-password",placeholder:"Leave blank to keep current password"})]}),e.jsx("button",{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded focus:outline-none focus:ring mb-4",children:"Save Changes"}),e.jsx("button",{type:"button",onClick:g,className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded focus:outline-none focus:ring",children:"Buy Saldo (Credit)"})]})})})};export{v as default};
