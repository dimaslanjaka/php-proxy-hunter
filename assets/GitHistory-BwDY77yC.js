import{j as e}from"../index.html";import{R as l}from"./react-router-ChLYyIsA.js";import{N as b,F as j}from"./Navbar-DldUx6nZ.js";import"./react-CjZsb-BP.js";let d=null,h=null;function w(){const[s,c]=l.useState(null),[m,o]=l.useState(null),[r,x]=l.useState(1),[y,g]=l.useState(!1),i=30;l.useEffect(()=>{if(!s){const t=localStorage.getItem("gitHistoryFirstPage");if(t)try{const a=JSON.parse(t);Array.isArray(a)&&a.length>0&&c(a)}catch{o("Failed to parse cached git history")}}},[]),l.useEffect(()=>{let t=!1;if(g(!0),d){c(d);try{localStorage.setItem("gitHistoryFirstPage",JSON.stringify(d.slice(0,i)))}catch{o("Failed to update git history cache")}g(!1);return}return h||(h=fetch("/data/git-history.json").then(a=>{if(!a.ok)throw new Error("Failed to fetch git history");return a.json()}).then(a=>{d=a;try{localStorage.setItem("gitHistoryFirstPage",JSON.stringify(a.slice(0,i)))}catch{o("Failed to update git history cache")}return a})),h.then(a=>{t||c(a)}).catch(a=>{t||o(a.message)}).finally(()=>{t||g(!1)}),()=>{t=!0}},[i]);const f=s?s.length:0,n=Math.ceil(f/i),u=s?s.slice((r-1)*i,r*i):[];return e.jsxs(e.Fragment,{children:[e.jsx(b,{}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center justify-center gap-2",children:[e.jsx("i",{className:"fa-duotone fa-code-branch text-blue-600 dark:text-blue-400"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:"Repository Progress"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:"Explore the historical progress and key milestones of this repository. Each entry below represents a significant update, feature, or fix that has shaped the project."})]}),m&&e.jsx("div",{className:"text-red-500 dark:text-red-400 text-center mb-4",children:m}),y&&e.jsxs("div",{className:"flex justify-center items-center py-8",children:[e.jsx("i",{className:"fa-duotone fa-spinner-third animate-spin text-2xl text-blue-600 dark:text-blue-400 mr-2"}),e.jsx("span",{className:"text-gray-500 dark:text-gray-300",children:"Loading git history..."})]}),s&&e.jsxs(e.Fragment,{children:[e.jsx("ol",{className:"relative border-l border-gray-200 dark:border-gray-700",children:u.map(t=>e.jsxs("li",{className:"mb-10 ml-6",children:[e.jsx("span",{className:"absolute flex items-center justify-center w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-full -left-4 ring-8 ring-white dark:ring-gray-900",children:e.jsx("i",{className:"fa-duotone fa-rocket-launch text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2 md:gap-4",children:[e.jsx("h3",{className:"flex-1 text-lg font-semibold text-gray-900 dark:text-white",children:t.message.split(`
`)[0]}),e.jsxs("div",{className:"flex flex-col md:items-end gap-1",children:[e.jsxs("span",{className:"flex items-center text-xs text-gray-400 dark:text-gray-300 font-mono",children:[e.jsx("i",{className:"fa-duotone fa-calendar-days mr-1"}),t.date?new Date(t.date).toLocaleString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):""]}),e.jsxs("span",{className:"flex items-center text-xs text-gray-400 dark:text-gray-300 font-mono",children:[e.jsx("i",{className:"fa-duotone fa-hashtag mr-1"}),t.hash.substring(0,8)]})]})]}),e.jsx("p",{className:"mb-2 text-base font-normal text-gray-600 dark:text-gray-300 whitespace-pre-line",children:t.message.split(`
`).slice(1).join(`
`).trim()}),t.files&&t.files.length>0&&e.jsxs("div",{className:"mb-2",children:[e.jsxs("span",{className:"text-xs text-gray-400 dark:text-gray-300 mr-2",children:[e.jsx("i",{className:"fa-duotone fa-file-code mr-1"}),"Files changed:"]}),e.jsx("ul",{className:"list-disc list-inside text-xs text-gray-500 dark:text-gray-400",children:t.files.map(a=>e.jsx("li",{children:a},a))})]})]},t.hash))}),n>1&&e.jsx("nav",{className:"flex justify-center mt-8","aria-label":"Pagination",children:e.jsxs("ul",{className:"inline-flex -space-x-px text-sm",children:[e.jsx("li",{children:e.jsx("button",{className:"px-3 py-2 ml-0 leading-tight text-gray-500 bg-white border border-gray-300 rounded-l-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",onClick:()=>x(t=>Math.max(1,t-1)),disabled:r===1,"aria-label":"Previous page",children:e.jsx("i",{className:"fa-duotone fa-angle-left"})})}),Array.from({length:n},(t,a)=>a+1).map(t=>Math.abs(t-r)<=2||t===1||t===n?e.jsx("li",{children:e.jsx("button",{className:`px-3 py-2 leading-tight border ${t===r?"text-white bg-blue-600 border-blue-600 dark:bg-blue-700 dark:border-blue-700":"text-gray-500 bg-white border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white"}`,onClick:()=>x(t),"aria-current":t===r?"page":void 0,children:t})},t):t===r-3||t===r+3?e.jsx("li",{children:e.jsx("span",{className:"px-3 py-2 text-gray-400",children:"â€¦"})},t):null),e.jsx("li",{children:e.jsx("button",{className:"px-3 py-2 leading-tight text-gray-500 bg-white border border-gray-300 rounded-r-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",onClick:()=>x(t=>Math.min(n,t+1)),disabled:r===n,"aria-label":"Next page",children:e.jsx("i",{className:"fa-duotone fa-angle-right"})})})]})})]})]}),e.jsx(j,{})]})}export{w as default};
