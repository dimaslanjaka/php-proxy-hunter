name: Main CI

on:
  workflow_dispatch:
    inputs:
      max:
        description: "The maximum proxies to be checked."
        required: true
        default: "500"
  schedule:
    # Run every hour
    - cron: "0 * * * *"

concurrency:
  group: ${{ github.workflow }}-${{ github.event_name }}
  cancel-in-progress: false

jobs:
  build:
    if: contains(github.repository, 'proxy')
    permissions: read-all
    uses: ./.github/workflows/reusable-checker.yml
    with:
      max: ${{ github.event.inputs.max || 500 }}
